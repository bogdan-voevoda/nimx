import nimx.keyboard
import tables
import sdl2

const virtualKeyMapping: Table[cint, VirtualKey] = {
    K_UNKNOWN:          VirtualKey.Unknown,
    K_ESCAPE:           VirtualKey.Escape,
    K_1:                VirtualKey.One,
    K_2:                VirtualKey.Two,
    K_3:                VirtualKey.Three,
    K_4:                VirtualKey.Four,
    K_5:                VirtualKey.Five,
    K_6:                VirtualKey.Six,
    K_7:                VirtualKey.Seven,
    K_8:                VirtualKey.Eight,
    K_9:                VirtualKey.Nine,
    K_0:                VirtualKey.Zero,
    K_MINUS:            VirtualKey.Minus,
    K_EQUALS:           VirtualKey.Equals,
    K_BACKSPACE:        VirtualKey.Backspace,
    K_TAB:              VirtualKey.Tab,
    K_q:                VirtualKey.Q,
    K_w:                VirtualKey.W,
    K_e:                VirtualKey.E,
    K_r:                VirtualKey.R,
    K_t:                VirtualKey.T,
    K_y:                VirtualKey.Y,
    K_u:                VirtualKey.U,
    K_i:                VirtualKey.I,
    K_o:                VirtualKey.O,
    K_p:                VirtualKey.P,
    K_LEFTBRACKET:      VirtualKey.LeftBracket,
    K_RIGHTBRACKET:     VirtualKey.RightBracket,
    K_RETURN:           VirtualKey.Return,
    K_LCTRL:            VirtualKey.LeftControl,
    K_a:                VirtualKey.A,
    K_s:                VirtualKey.S,
    K_d:                VirtualKey.D,
    K_f:                VirtualKey.F,
    K_g:                VirtualKey.G,
    K_h:                VirtualKey.H,
    K_j:                VirtualKey.J,
    K_k:                VirtualKey.K,
    K_l:                VirtualKey.L,
    K_SEMICOLON:        VirtualKey.Semicolon,
    K_QUOTE:            VirtualKey.Apostrophe,
    K_BACKQUOTE:        VirtualKey.Backtick,
    K_LSHIFT:           VirtualKey.LeftShift,
    K_BACKSLASH:        VirtualKey.BackSlash,
    K_z:                VirtualKey.Z,
    K_x:                VirtualKey.X,
    K_c:                VirtualKey.C,
    K_v:                VirtualKey.V,
    K_b:                VirtualKey.B,
    K_n:                VirtualKey.N,
    K_m:                VirtualKey.M,
    K_COMMA:            VirtualKey.Comma,
    K_PERIOD:           VirtualKey.Period,
    K_SLASH:            VirtualKey.Slash,
    K_RSHIFT:           VirtualKey.RightShift,
    K_KP_MULTIPLY:      VirtualKey.KeypadMultiply,
    K_LALT:             VirtualKey.LeftAlt,
    K_SPACE:            VirtualKey.Space,
    K_CAPSLOCK:         VirtualKey.CapsLock,
    K_F1:               VirtualKey.F1,
    K_F2:               VirtualKey.F2,
    K_F3:               VirtualKey.F3,
    K_F4:               VirtualKey.F4,
    K_F5:               VirtualKey.F5,
    K_F6:               VirtualKey.F6,
    K_F7:               VirtualKey.F7,
    K_F8:               VirtualKey.F8,
    K_F9:               VirtualKey.F9,
    K_F10:              VirtualKey.F10,
    K_NUMLOCKCLEAR:     VirtualKey.NumLock,
    K_SCROLLLOCK:       VirtualKey.ScrollLock,
    K_KP_7:             VirtualKey.Keypad7,
    K_KP_8:             VirtualKey.Keypad8,
    K_KP_9:             VirtualKey.Keypad9,
    K_KP_MINUS:         VirtualKey.KeypadMinus,
    K_KP_4:             VirtualKey.Keypad4,
    K_KP_5:             VirtualKey.Keypad5,
    K_KP_6:             VirtualKey.Keypad6,
    K_KP_PLUS:          VirtualKey.KeypadPlus,
    K_KP_1:             VirtualKey.Keypad1,
    K_KP_2:             VirtualKey.Keypad2,
    K_KP_3:             VirtualKey.Keypad3,
    K_KP_0:             VirtualKey.Keypad0,
    K_KP_PERIOD:        VirtualKey.KeypadPeriod,
    #0:                 VirtualKey.NonUSBackSlash, # -
    K_F11:              VirtualKey.F11,
    K_F12:              VirtualKey.F12,
    #0:                 VirtualKey.International1, # -
    #0:                 VirtualKey.Lang3, # -
    #0:                 VirtualKey.Lang4, # -
    #0:                 VirtualKey.International4, # -
    #0:                 VirtualKey.International2, # -
    #0:                 VirtualKey.International5, # -
    #0:                 VirtualKey.International6, # -
    K_KP_ENTER:         VirtualKey.KeypadEnter,
    K_RCTRL:            VirtualKey.RightControl,
    K_KP_DIVIDE:        VirtualKey.KeypadDivide,
    K_PRINTSCREEN:      VirtualKey.PrintScreen,
    K_RALT:             VirtualKey.RightAlt,
    K_HOME:             VirtualKey.Home,
    K_UP:               VirtualKey.Up,
    K_PAGEUP:           VirtualKey.PageUp,
    K_LEFT:             VirtualKey.Left,
    K_RIGHT:            VirtualKey.Right,
    K_END:              VirtualKey.End,
    K_DOWN:             VirtualKey.Down,
    K_PAGEDOWN:         VirtualKey.PageDown,
    K_INSERT:           VirtualKey.Insert,
    K_DELETE:           VirtualKey.Delete,
    K_MUTE:             VirtualKey.Mute,
    K_VOLUMEDOWN:       VirtualKey.VolumeDown,
    K_VOLUMEUP:         VirtualKey.VolumeUp,
    K_POWER:            VirtualKey.Power,
    K_KP_EQUALS:        VirtualKey.KeypadEquals,
    K_KP_PLUSMINUS:     VirtualKey.KeypadPlusMinus,
    K_PAUSE:            VirtualKey.Pause,
    K_KP_COMMA:         VirtualKey.KeypadComma,
    #0:                 VirtualKey.Lang1, # -
    #0:                 VirtualKey.Lang2, # -
    K_RGUI:             VirtualKey.RightGUI,
    K_STOP:             VirtualKey.Stop,
    K_AGAIN:            VirtualKey.Again,
    K_UNDO:             VirtualKey.Undo,
    K_COPY:             VirtualKey.Copy,
    K_PASTE:            VirtualKey.Paste,
    K_FIND:             VirtualKey.Find,
    K_CUT:              VirtualKey.Cut,
    K_HELP:             VirtualKey.Help,
    K_MENU:             VirtualKey.Menu,
    K_CALCULATOR:       VirtualKey.Calculator,
    K_SLEEP:            VirtualKey.Sleep,
    K_MAIL:             VirtualKey.Mail,
    K_AC_BOOKMARKS:     VirtualKey.AcBookmarks,
    K_COMPUTER:         VirtualKey.Computer,
    K_AC_BACK:          VirtualKey.AcBack,
    K_AC_FORWARD:       VirtualKey.AcForward,
    K_EJECT:            VirtualKey.Eject,
    K_AUDIONEXT:        VirtualKey.AudioNext,
    K_AUDIOPLAY:        VirtualKey.AudioPlay,
    K_AUDIOPREV:        VirtualKey.AudioPrev,
    K_AC_HOME:          VirtualKey.AcHome,
    K_AC_REFRESH:       VirtualKey.AcRefresh,
    K_KP_LEFTPAREN:     VirtualKey.KeypadLeftPar,
    K_KP_RIGHTPAREN:    VirtualKey.KeypadRightPar,
    K_F13:              VirtualKey.F13,
    K_F14:              VirtualKey.F14,
    K_F15:              VirtualKey.F15,
    K_F16:              VirtualKey.F16,
    K_F17:              VirtualKey.F17,
    K_F18:              VirtualKey.F18,
    K_F19:              VirtualKey.F19,
    K_F20:              VirtualKey.F20,
    K_F21:              VirtualKey.F21,
    K_F22:              VirtualKey.F22,
    K_F23:              VirtualKey.F23,
    K_F24:              VirtualKey.F24,
    K_AC_SEARCH:        VirtualKey.AcSearch,
    K_ALTERASE:         VirtualKey.AltErase,
    K_CANCEL:           VirtualKey.Cancel,
    K_BRIGHTNESSDOWN:   VirtualKey.BrightnessDown,
    K_BRIGHTNESSUP:     VirtualKey.BrightnessUp,
    K_DISPLAYSWITCH:    VirtualKey.DisplaySwitch,
    K_KBDILLUMTOGGLE:   VirtualKey.IlluminateToggle,
    K_KBDILLUMDOWN:     VirtualKey.IlluminateDown,
    K_KBDILLUMUP:       VirtualKey.IlluminateUp
}.toTable()

template virtualKeyFromNative*(kc: cint): VirtualKey = virtualKeyMapping.getOrDefault(kc)
